<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Buat Undangan Digital Prasmanan — Klik to Add</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --ink:#221C17;          /* utama (gelap) */
      --sand:#D1B391;         /* aksen */
      --sand-2:#E4CFB4;       /* aksen terang */
      --cream:#F5EFE7;        /* latar lembut */
      --paper:#FFFFFF;        /* kartu */
      --muted:#8A7B6B;        /* teks sekunder */
      --success:#2E7D32;
      --danger:#C62828;
      --shadow:0 10px 24px rgba(0,0,0,.08);
      --radius:14px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Plus Jakarta Sans',system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
      color:var(--ink);
      background:linear-gradient(180deg,var(--cream),#faf7f2 60%);
    }

    /* Header / Burger */
    .topbar{
      position:sticky; top:0; z-index:3000;
      display:flex; align-items:center; gap:12px;
      padding:14px 16px;
      background:linear-gradient(180deg,#fff,rgba(255,255,255,0.85));
      backdrop-filter: blur(6px);
      border-bottom:1px solid rgba(34,28,23,.08);
    }
    .brand{
      font-weight:700; letter-spacing:.4px;
      color:var(--ink);
    }
    #burger{
      display:none;
      border:0; border-radius:10px;
      padding:10px 12px; cursor:pointer;
      background:var(--ink); color:#fff;
      box-shadow:var(--shadow);
    }
    #burger:active{transform:translateY(1px)}

    /* Layout */
    .wrap{
      max-width:1200px; margin:24px auto; padding:0 16px;
      display:flex; gap:20px;
      align-items:flex-start;
    }

    /* Sidebar */
    .sidebar{
      width:320px; max-height:calc(100vh - 80px);
      background:#fff; border:1px solid rgba(34,28,23,.08);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow-y:auto;
      position:sticky; top:92px;
    }
    .sidebar__head{
      position:sticky; top:0; z-index:1;
      padding:16px 18px;
      background:linear-gradient(180deg,var(--sand),var(--sand-2));
      color:#2c241c; font-weight:700;
      border-top-left-radius:var(--radius);
      border-top-right-radius:var(--radius);
      border-bottom:1px solid rgba(34,28,23,.12);
      letter-spacing:.3px;
    }
    .list{
      padding:12px;
      display:grid;
      grid-template-columns:1fr;
      gap:12px;
    }
    .item{
      display:flex; gap:12px; align-items:center;
      padding:10px; border-radius:12px;
      border:1px solid rgba(34,28,23,.08);
      background:linear-gradient(180deg,#fff,#fffdf8);
      cursor:pointer; transition:.15s ease transform, .15s ease box-shadow;
    }
    .item:hover{ box-shadow:0 6px 16px rgba(34,28,23,.08); transform:translateY(-1px) }
    .item:active{ transform:translateY(0) }
    .thumb{
      width:84px; height:64px; border-radius:10px; object-fit:cover;
      border:1px solid rgba(34,28,23,.08);
      background:#f1e8dc;
    }
    .meta{ flex:1; min-width:0 }
    .name{ font-weight:600 }
    .price{ font-size:.92rem; color:var(--muted) }

    /* Plate / Canvas */
    .plate{
      flex:1; min-width:0;
      background:#fff; border:1px solid rgba(34,28,23,.08);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:18px;
    }
    .plate h2{
      margin:0 0 12px; font-size:1.15rem; letter-spacing:.2px;
      color:var(--ink);
    }
    .plate-zone{
      display:flex; flex-direction:column; gap:10px;
      min-height:180px; padding:8px;
      background:linear-gradient(180deg,#fffdf8,#fff);
      border:1px dashed rgba(34,28,23,.15);
      border-radius:12px;
    }
    .pitem{
      display:flex; align-items:center; gap:10px;
      padding:10px 12px; border-radius:10px;
      background:linear-gradient(180deg,#f6efe6,#fff);
      border:1px solid rgba(34,28,23,.1);
    }
    .pitem.fixed{
      background:linear-gradient(180deg,#f0ebe4,#fff);
      border-style:solid;
    }
    .pname{ font-weight:600 }
    .pprice{ margin-left:auto; font-weight:600; color:#2c4b2f }
    .remove{
      margin-left:6px; border:0; cursor:pointer;
      background:var(--danger); color:#fff; border-radius:8px;
      padding:6px 10px;
    }

    /* Summary & Inputs */
    .panel{
      margin-top:16px; display:grid; gap:10px;
    }
    .total{
      padding:12px; border-radius:10px;
      background:linear-gradient(180deg,var(--sand-2),#f7ead7);
      border:1px solid rgba(34,28,23,.1);
      font-weight:700;
    }
    .input, .btn{
      width:100%; padding:12px 14px; border-radius:10px;
      border:1px solid rgba(34,28,23,.15); font:inherit;
      background:#fff;
    }
    .btn{
      background:var(--ink); color:#fff; border-color:transparent;
      font-weight:700; cursor:pointer; box-shadow:var(--shadow);
    }
    .btn:hover{ filter:brightness(1.05) }
    .hint{ font-size:.92rem; color:var(--muted) }

    /* Overlay (klik area kanan untuk nutup sidebar di mobile) */
    .overlay{
      position:fixed; inset:0; background:rgba(0,0,0,.45);
      display:none; z-index:1900;
    }
    .overlay.active{ display:block }

    /* Mobile */
    @media (max-width: 900px){
      #burger{ display:inline-block }
      .wrap{
        flex-direction:column; gap:16px; margin:16px auto;
      }
      .sidebar{
        position: fixed;
        top: 72px;
        left: 0;
        width: min(92vw, 380px);
        /* ❌ sebelumnya: height: calc(100vh - 80px); */
        /* ✅ pakai dvh agar tidak kepotong di mobile */
        height: calc(100dvh - 80px);
        transform: translateX(-110%);
        transition: transform .25s ease;
        z-index: 2001;

        /* pastikan scroll mulus di mobile */
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
    }
    .sidebar.open{ transform: translateX(0) }
    }

    /* Tombol aksi di item plate */
    .actions{
    display:flex; gap:6px; margin-left:8px;
    }
    .btn-icon{
    border:0; cursor:pointer; border-radius:8px;
    padding:6px 10px; font-weight:700; line-height:1;
    background:#e9e2d9; color:#221C17;
    }
    .btn-icon:hover{ filter:brightness(1.05) }
    .btn-up, .btn-down{ background:#E4CFB4; }     /* aksen sesuai palet */
    .btn-remove{ background:#C62828; color:#fff; }

  </style>
</head>
<body>
  <header class="topbar">
    <button id="burger" aria-label="Buka menu">☰</button>
    <div class="brand">Undangan Digital · Prasmanan</div>
  </header>

  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <main class="wrap">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar" aria-label="Pilih Section">
      <div class="sidebar__head">Pilih Section (klik untuk menambah)</div>
      <div class="list" id="list">
        <!-- Item contoh -->
        <button class="item" data-name="Nama 1 Orang" data-price="5000">
          <img class="thumb" src="https://picsum.photos/200/150?random=1" alt="">
          <div class="meta">
            <div class="name">Nama 1 Orang</div>
            <div class="price">Rp 5.000</div>
          </div>
        </button>
        <button class="item" data-name="Nama 2 Orang" data-price="8000">
          <img class="thumb" src="https://picsum.photos/200/150?random=2" alt="">
          <div class="meta">
            <div class="name">Nama 2 Orang</div>
            <div class="price">Rp 8.000</div>
          </div>
        </button>
        <button class="item" data-name="Galeri Carousel Model 1" data-price="10000">
          <img class="thumb" src="https://picsum.photos/200/150?random=3" alt="">
          <div class="meta">
            <div class="name">Galeri Carousel Model 1 (Unlimited Foto)</div>
            <div class="price">Rp 10.000</div>
          </div>
        </button>
        <button class="item" data-name="Galeri Carousel Model 2" data-price="12000">
          <img class="thumb" src="https://picsum.photos/200/150?random=4" alt="">
          <div class="meta">
            <div class="name">Galeri Carousel Model 2 (Unlimited Foto)</div>
            <div class="price">Rp 12.000</div>
          </div>
        </button>
        <button class="item" data-name="Maps" data-price="7000">
          <img class="thumb" src="https://picsum.photos/200/150?random=5" alt="">
          <div class="meta">
            <div class="name">Maps</div>
            <div class="price">Rp 7.000</div>
          </div>
        </button>
        <button class="item" data-name="Live Stream" data-price="15000">
          <img class="thumb" src="https://picsum.photos/200/150?random=6" alt="">
          <div class="meta">
            <div class="name">Live Stream</div>
            <div class="price">Rp 15.000</div>
          </div>
        </button>
        <button class="item" data-name="Gift" data-price="10000">
          <img class="thumb" src="https://picsum.photos/200/150?random=7" alt="">
          <div class="meta">
            <div class="name">Gift</div>
            <div class="price">Rp 10.000</div>
          </div>
        </button>
        <button class="item" data-name="Music" data-price="6000">
          <img class="thumb" src="https://picsum.photos/200/150?random=8" alt="">
          <div class="meta">
            <div class="name">Music</div>
            <div class="price">Rp 6.000</div>
          </div>
        </button>
        <button class="item" data-name="RSVP" data-price="9000">
          <img class="thumb" src="https://picsum.photos/200/150?random=9" alt="">
          <div class="meta">
            <div class="name">RSVP</div>
            <div class="price">Rp 9.000</div>
          </div>
        </button>
      </div>
    </aside>

    <!-- Plate / Canvas -->
    <section class="plate" id="plate">
      <h2>Kotak Undangan Anda</h2>
      <div class="plate-zone" id="plateZone">
        <div class="pitem fixed" data-name="Welcome Page" data-price="0">
          <div class="pname">Welcome Page (Include)</div>
          <div class="pprice">Rp 0</div>
        </div>
        <!-- Item dinamis akan masuk di sini -->
        <div class="pitem fixed" data-name="Penutup" data-price="0">
          <div class="pname">Penutup (Include)</div>
          <div class="pprice">Rp 0</div>
        </div>
      </div>

      <div class="panel">
        <div class="total" id="total">Total Harga: Rp 0</div>
        <input class="input" id="folder-name" type="text" placeholder="Masukkan Nama Folder (e.g., namaklien)" />
        <div id="music-input-container" style="display:none;">
          <input class="input" id="music-link" type="text" placeholder="Masukkan Link YouTube Musik" />
          <div class="hint">Input ini muncul otomatis jika menu <b>Music</b> ada di kotak.</div>
        </div>
        <button class="btn" id="finish">Selesai</button>
      </div>
    </section>
  </main>

  <script>
  // Elemen dasar
  const burger = document.getElementById('burger');
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('overlay');
  const plateZone = document.getElementById('plateZone');
  const totalElem = document.getElementById('total');
  const finishBtn = document.getElementById('finish');
  const folderInput = document.getElementById('folder-name');
  const musicContainer = document.getElementById('music-input-container');
  const musicInput = document.getElementById('music-link');

  // Sidebar helpers
  const openSidebar = () => {
    sidebar.classList.add('open');
    overlay.classList.add('active');
    document.body.style.overflow = 'hidden';
  };
  const closeSidebar = () => {
    sidebar.classList.remove('open');
    overlay.classList.remove('active');
    document.body.style.overflow = '';
  };
  const toggleSidebar = () => (sidebar.classList.contains('open') ? closeSidebar() : openSidebar());
  burger.addEventListener('click', toggleSidebar);
  overlay.addEventListener('click', closeSidebar);
  document.addEventListener('keydown', e => { if (e.key === 'Escape') closeSidebar(); });

  // Util: temukan item bergerak (bukan .fixed)
  const movableItems = () => [...plateZone.querySelectorAll('.pitem:not(.fixed)')];

  // Tambah item ke plate (di atas Penutup)
  function addItemToPlate(name, price) {
    const row = document.createElement('div');
    row.className = 'pitem';
    row.dataset.name = name;
    row.dataset.price = String(price);

    row.innerHTML = `
      <div class="pname">${name}</div>
      <div class="pprice">Rp ${Number(price).toLocaleString('id-ID')}</div>
      <div class="actions">
        <button class="btn-icon btn-up" aria-label="Naik">↑</button>
        <button class="btn-icon btn-down" aria-label="Turun">↓</button>
        <button class="btn-icon btn-remove" aria-label="Hapus">Hapus</button>
      </div>
    `;

    // sisipkan sebelum item fixed terakhir (Penutup)
    const fixedEnd = plateZone.querySelector('.pitem.fixed:last-of-type');
    plateZone.insertBefore(row, fixedEnd);

    // aksi hapus
    row.querySelector('.btn-remove').addEventListener('click', () => {
      row.remove();
      updateTotalAndMusic();
    });

    // aksi naik
    row.querySelector('.btn-up').addEventListener('click', () => {
      const items = movableItems();
      const idx = items.indexOf(row);
      if (idx > 0) {
        plateZone.insertBefore(row, items[idx - 1]); // pindah di atas tetangga sebelumnya
      }
      updateTotalAndMusic();
    });

    // aksi turun
    row.querySelector('.btn-down').addEventListener('click', () => {
      const items = movableItems();
      const idx = items.indexOf(row);
      if (idx !== -1 && idx < items.length - 1) {
        const after = items[idx + 1].nextSibling;
        plateZone.insertBefore(row, after); // pindah di bawah tetangga berikutnya
      }
      updateTotalAndMusic();
    });

    updateTotalAndMusic();
  }

  // Klik item sidebar -> tambah
  document.getElementById('list').addEventListener('click', (e) => {
    const btn = e.target.closest('.item');
    if (!btn) return;
    const name = btn.getAttribute('data-name');
    const price = parseInt(btn.getAttribute('data-price'), 10) || 0;
    addItemToPlate(name, price);
    if (window.innerWidth <= 900) closeSidebar(); // auto-close di mobile
  });

  // Hitung total & visibilitas music input
  function updateTotalAndMusic() {
    let total = 0;
    let hasMusic = false;
    movableItems().forEach(el => {
      total += parseInt(el.dataset.price, 10) || 0;
      if (el.dataset.name === 'Music') hasMusic = true;
    });
    totalElem.textContent = `Total Harga: Rp ${total.toLocaleString('id-ID')}`;

    if (hasMusic) {
      musicContainer.style.display = 'block';
    } else {
      musicContainer.style.display = 'none';
      musicInput.value = '';
    }
  }

  // Kirim WA
  finishBtn.addEventListener('click', () => {
    const folder = (folderInput.value || '').trim();
    if (!folder) { alert('Masukkan nama folder!'); folderInput.focus(); return; }

    const items = movableItems();
    let message = `Nama Folder: ${folder}\n`;
    items.forEach((el, i) => { message += `Urutan ${i + 1}: ${el.dataset.name}\n`; });

    const total = totalElem.textContent.replace(/[^\d]/g,'');
    message += `Total harga: Rp ${Number(total||0).toLocaleString('id-ID')}`;

    if (musicContainer.style.display === 'block' && musicInput.value.trim() !== '') {
      message += `\nLink Musik: ${musicInput.value.trim()}`;
    }

    const waUrl = `https://wa.me/6285697833911?text=${encodeURIComponent(message)}`;
    window.open(waUrl, '_blank');
  });

  // Init
  updateTotalAndMusic();
</script>

</body>
</html>
