<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buat Undangan Digital Prasmanan</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
        }
        .container {
            display: flex;
            max-width: 1200px;
            margin: 20px auto;
            gap: 20px;
        }
        .sections {
            width: 30%;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .section-item {
            background-color: #e9e9e9;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 4px;
            cursor: grab;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .section-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 5px;
        }
        .section-item span {
            font-weight: bold;
        }
        .section-item .price {
            color: green;
            font-size: 0.9em;
        }
        .plate {
            width: 70%;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            min-height: 400px;
        }
        .plate-item {
            background-color: #d9f7d9;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 4px;
            cursor: grab;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .plate-item.fixed {
            background-color: #f0f0f0;
            cursor: default;
        }
        .plate-item .remove {
            background: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 4px;
        }
        #total {
            margin-top: 20px;
            font-size: 1.2em;
            font-weight: bold;
        }
        #folder-name {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
        }
        #finish {
            background: blue;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }
        /* Responsif untuk mobile */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            .sections {
                width: 100%;
                order: 2; /* Sidebar di bawah */
                position: relative;
            }
            .plate {
                width: 100%;
                order: 1;
            }
            /* Simulasi sidebar seperti Canva mobile: gunakan toggle */
            .sections {
                display: none; /* Sembunyikan default */
            }
            .sections.open {
                display: block;
            }
            #toggle-sidebar {
                display: block;
                background: #007bff;
                color: white;
                padding: 10px;
                text-align: center;
                cursor: pointer;
            }
        }
        /* Drag and drop styles */
        .dragging {
            opacity: 0.5;
        }
        .over {
            border: 2px dashed #000;
        }
    </style>
</head>
<body>
    <div id="toggle-sidebar" style="display: none;">Buka Sidebar Section</div>
    <div class="container">
        <div class="sections">
            <h2>Pilih Section (Drag ke Kotak)</h2>
            <div class="section-item" draggable="true" data-name="Nama 1 Orang" data-price="5000">
                <img src="https://picsum.photos/200/150?random=1" alt="Contoh Nama 1 Orang">
                <span>Nama 1 Orang</span>
                <span class="price">Rp. 5.000</span>
            </div>
            <div class="section-item" draggable="true" data-name="Nama 2 Orang" data-price="8000">
                <img src="https://picsum.photos/200/150?random=2" alt="Contoh Nama 2 Orang">
                <span>Nama 2 Orang</span>
                <span class="price">Rp. 8.000</span>
            </div>
            <div class="section-item" draggable="true" data-name="Galeri Carousel Model 1" data-price="10000">
                <img src="https://picsum.photos/200/150?random=3" alt="Contoh Galeri Model 1">
                <span>Galeri Carousel Model 1 (Unlimited Foto)</span>
                <span class="price">Rp. 10.000</span>
            </div>
            <div class="section-item" draggable="true" data-name="Galeri Carousel Model 2" data-price="12000">
                <img src="https://picsum.photos/200/150?random=4" alt="Contoh Galeri Model 2">
                <span>Galeri Carousel Model 2 (Unlimited Foto)</span>
                <span class="price">Rp. 12.000</span>
            </div>
            <div class="section-item" draggable="true" data-name="Maps" data-price="7000">
                <img src="https://picsum.photos/200/150?random=5" alt="Contoh Maps">
                <span>Maps</span>
                <span class="price">Rp. 7.000</span>
            </div>
            <div class="section-item" draggable="true" data-name="Live Stream" data-price="15000">
                <img src="https://picsum.photos/200/150?random=6" alt="Contoh Live Stream">
                <span>Live Stream</span>
                <span class="price">Rp. 15.000</span>
            </div>
            <div class="section-item" draggable="true" data-name="Gift" data-price="10000">
                <img src="https://picsum.photos/200/150?random=7" alt="Contoh Gift">
                <span>Gift</span>
                <span class="price">Rp. 10.000</span>
            </div>
            <div class="section-item" draggable="true" data-name="Music" data-price="6000">
                <img src="https://picsum.photos/200/150?random=8" alt="Contoh Music">
                <span>Music</span>
                <span class="price">Rp. 6.000</span>
            </div>
            <div class="section-item" draggable="true" data-name="RSVP" data-price="9000">
                <img src="https://picsum.photos/200/150?random=9" alt="Contoh RSVP">
                <span>RSVP</span>
                <span class="price">Rp. 9.000</span>
            </div>
        </div>
        <div class="plate" id="plate">
            <h2>Kotak Undangan Anda</h2>
            <div class="plate-item fixed" data-name="Welcome Page" data-price="0">Welcome Page (Include)</div>
            <!-- Tempat drop di sini -->
            <div class="plate-item fixed" data-name="Penutup" data-price="0">Penutup (Include)</div>
        </div>
    </div>
    <div style="max-width: 1200px; margin: 20px auto;">
        <div id="total">Total Harga: Rp. 0</div>
        <input type="text" id="folder-name" placeholder="Masukkan Nama Folder (e.g., namaklien)">
        <button id="finish">Selesai</button>
    </div>

    <script>
        const sections = document.querySelectorAll('.section-item');
        const plate = document.getElementById('plate');
        const totalElem = document.getElementById('total');
        const folderInput = document.getElementById('folder-name');
        const finishBtn = document.getElementById('finish');
        const toggleSidebar = document.getElementById('toggle-sidebar');
        const sectionsContainer = document.querySelector('.sections');

        // Toggle sidebar for mobile
        if (window.innerWidth <= 768) {
            toggleSidebar.style.display = 'block';
            toggleSidebar.addEventListener('click', () => {
                sectionsContainer.classList.toggle('open');
            });
        }

        // Drag and drop setup
        sections.forEach(item => {
            item.addEventListener('dragstart', dragStart);
        });

        plate.addEventListener('dragover', dragOver);
        plate.addEventListener('drop', drop);
        plate.addEventListener('dragenter', dragEnter);
        plate.addEventListener('dragleave', dragLeave);

        function dragStart(e) {
            e.dataTransfer.setData('text/plain', JSON.stringify({
                name: this.dataset.name,
                price: this.dataset.price
            }));
            this.classList.add('dragging');
        }

        function dragOver(e) {
            e.preventDefault();
        }

        function dragEnter(e) {
            e.preventDefault();
            this.classList.add('over');
        }

        function dragLeave() {
            this.classList.remove('over');
        }

        function drop(e) {
            e.preventDefault();
            this.classList.remove('over');
            const data = JSON.parse(e.dataTransfer.getData('text/plain'));
            const newItem = document.createElement('div');
            newItem.classList.add('plate-item');
            newItem.dataset.name = data.name;
            newItem.dataset.price = data.price;
            newItem.innerHTML = `${data.name} (Rp. ${data.price}) <button class="remove">Hapus</button>`;
            newItem.draggable = true;
            newItem.addEventListener('dragstart', dragStartPlate);
            const removeBtn = newItem.querySelector('.remove');
            removeBtn.addEventListener('click', removeItem);

            // Insert before penutup
            const penutup = plate.querySelector('.plate-item.fixed:last-child');
            plate.insertBefore(newItem, penutup);

            updateTotal();
        }

        // Allow reordering in plate
        function dragStartPlate(e) {
            e.dataTransfer.setData('text/plain', this.outerHTML);
            this.classList.add('dragging');
            setTimeout(() => this.remove(), 0); // Remove after drag
        }

        plate.addEventListener('drop', (e) => {
            e.preventDefault();
            plate.classList.remove('over');
            const data = e.dataTransfer.getData('text/plain');
            if (data.startsWith('<div')) { // Reorder
                const temp = document.createElement('div');
                temp.innerHTML = data;
                const newItem = temp.firstChild;
                const removeBtn = newItem.querySelector('.remove');
                if (removeBtn) removeBtn.addEventListener('click', removeItem);
                newItem.addEventListener('dragstart', dragStartPlate);
                // Insert at drop position
                let target = e.target.closest('.plate-item');
                if (target && !target.classList.contains('fixed')) {
                    plate.insertBefore(newItem, target.nextSibling);
                } else {
                    const penutup = plate.querySelector('.plate-item.fixed:last-child');
                    plate.insertBefore(newItem, penutup);
                }
                updateTotal();
            }
        });

        function removeItem() {
            this.parentElement.remove();
            updateTotal();
        }

        function updateTotal() {
            let total = 0;
            plate.querySelectorAll('.plate-item:not(.fixed)').forEach(item => {
                total += parseInt(item.dataset.price);
            });
            totalElem.textContent = `Total Harga: Rp. ${total.toLocaleString()}`;
        }

        finishBtn.addEventListener('click', () => {
            const folder = folderInput.value.trim();
            if (!folder) {
                alert('Masukkan nama folder!');
                return;
            }
            const items = plate.querySelectorAll('.plate-item:not(.fixed)');
            let message = `Nama Folder: ${folder}\n`;
            items.forEach((item, index) => {
                message += `Urutan ${index + 1}: ${item.dataset.name}\n`;
            });
            const total = parseInt(totalElem.textContent.match(/\d+/)[0]);
            message += `Total harga: Rp.${total.toLocaleString()}`;
            const waUrl = `https://wa.me/628123456789?text=${encodeURIComponent(message)}`; // Ganti nomor WA
            window.open(waUrl, '_blank');
        });

        // Cleanup dragging class
        document.addEventListener('dragend', () => {
            document.querySelectorAll('.dragging').forEach(el => el.classList.remove('dragging'));
        });
    </script>
</body>
</html>